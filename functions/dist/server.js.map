{"version":3,"sources":["webpack://ssr-react-firebase/./functions/src/render.jsx","webpack://ssr-react-firebase/./functions/src/ssr_server.js","webpack://ssr-react-firebase/./functions/src/template.js","webpack://ssr-react-firebase/./src/About.jsx","webpack://ssr-react-firebase/./webpack.config.js","webpack://ssr-react-firebase/external \"dotenv\"","webpack://ssr-react-firebase/external \"express\"","webpack://ssr-react-firebase/external \"path\"","webpack://ssr-react-firebase/external \"react\"","webpack://ssr-react-firebase/external \"react-dom/server\"","webpack://ssr-react-firebase/external \"source-map-support\"","webpack://ssr-react-firebase/external \"webpack\"","webpack://ssr-react-firebase/external \"webpack-dev-middleware\"","webpack://ssr-react-firebase/external \"webpack-hot-middleware\"","webpack://ssr-react-firebase/external \"webpack-node-externals\"","webpack://ssr-react-firebase/webpack/bootstrap","webpack://ssr-react-firebase/webpack/runtime/compat get default export","webpack://ssr-react-firebase/webpack/runtime/define property getters","webpack://ssr-react-firebase/webpack/runtime/hasOwnProperty shorthand","webpack://ssr-react-firebase/webpack/runtime/make namespace object","webpack://ssr-react-firebase/webpack/startup"],"names":["render","req","res","body","renderToString","set","send","template","app","express","SourceMapSupport","dotenv","enableHMR","process","env","ENABLE_HMR","console","log","webpack","require","devMiddleware","hotMiddleware","config","entry","push","plugins","HotModuleReplacementPlugin","compiler","use","get","next","module","exports","About","path","nodeExternals","browserConfig","mode","output","filename","resolve","__dirname","publicPath","rules","test","exclude","loader","options","presets","targets","ie","edge","safari","firefox","chrome","optimization","splitChunks","name","chunks","DefinePlugin","__isBrowser__","devtool","serverConfig","server","target","externals","node"],"mappings":"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","file":"server.js","sourcesContent":["import React from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport About from '../../src/About.jsx';\r\nimport template from './template.js';\r\n\r\nfunction render(req, res) {\r\n  const body = renderToString(<About />);\r\n  res.set('Cache-Control', 'public, max-age=600, s-maxage=1200');\r\n  res.send(template(body));\r\n}\r\n\r\nexport default render;\r\n","import dotenv from 'dotenv';\r\nimport express from 'express';\r\nimport SourceMapSupport from 'source-map-support';\r\nimport render from './render.jsx';\r\n\r\nconst app = express();\r\n\r\nSourceMapSupport.install();\r\ndotenv.config();\r\nconst enableHMR = (process.env.ENABLE_HMR || 'true') === 'true';\r\n\r\nif (enableHMR && process.env.NODE_ENV !== 'production') {\r\n  console.log('Adding dev middlware, enabling HMR');\r\n  /* eslint \"global-require\": \"off\" */\r\n  /* eslint \"import/no-extraneous-dependencies\": \"off\" */\r\n  const webpack = require('webpack');\r\n  const devMiddleware = require('webpack-dev-middleware');\r\n  const hotMiddleware = require('webpack-hot-middleware');\r\n\r\n  const config = require('../../webpack.config.js')[0];\r\n  config.entry.app.push('webpack-hot-middleware/client');\r\n  config.plugins = config.plugins || [];\r\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\r\n\r\n  const compiler = webpack(config);\r\n  app.use(devMiddleware(compiler));\r\n  app.use(hotMiddleware(compiler));\r\n}\r\n\r\napp.get('*', (req, res, next) => {\r\n  render(req, res, next);\r\n});\r\n\r\nif (module.hot) {\r\n  module.hot.accept('./render.jsx');\r\n}\r\n\r\n// export default ssrServer = functions.https.onRequest(app);\r\nexport default app;\r\n","function template(body) {\r\n  return `<!doctype html>\r\n    <head>\r\n      <title>Time</title>\r\n    </head>\r\n    <body>\r\n      <div id=\"root\">${body}</div>\r\n      <script type=\"text/javascript\" src=\"app.bundle.js\"></script>\r\n      <script type=\"text/javascript\" src=\"vendor.bundle.js\"></script>\r\n    </body>\r\n  </html>`;\r\n}\r\n\r\nmodule.exports = template;\r\n\r\n/*\r\n<script type=\"text/javascript\" src=\"../../public/app.bundle.js\"></script>\r\n      <script type=\"text/javascript\" src=\"../../public/vendor.bundle.js\"></script>\r\n*/\r\n","// npx babel src/About.jsx --out-dir functions/src\r\n\r\nimport React from 'react';\r\n//const React = require('react');\r\n\r\nexport default function About() {\r\n  return (\r\n    <div className=\"text-center\">\r\n      <h3>React Server-Side Rendering Demo version 0.9</h3>\r\n      <h4>API version 1.0</h4>\r\n    </div>\r\n  );\r\n}\r\n","const path = require('path');\r\nconst nodeExternals = require('webpack-node-externals');\r\nconst webpack = require('webpack');\r\n\r\nconst browserConfig = {\r\n  mode: 'development',\r\n  entry: { app: ['./src/index.js'] },\r\n  output: {\r\n    filename: '[name].bundle.js',\r\n    path: path.resolve(__dirname, 'public'),\r\n    publicPath: '/',\r\n  },\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.jsx?$/,\r\n        exclude: /node_modules/,\r\n        use: {\r\n          loader: 'babel-loader',\r\n          options: {\r\n            presets: [\r\n              [\r\n                '@babel/preset-env',\r\n                {\r\n                  targets: {\r\n                    ie: '11',\r\n                    edge: '15',\r\n                    safari: '10',\r\n                    firefox: '50',\r\n                    chrome: '49',\r\n                  },\r\n                },\r\n              ],\r\n              '@babel/preset-react',\r\n            ],\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  optimization: {\r\n    splitChunks: {\r\n      name: 'vendor',\r\n      chunks: 'all',\r\n    },\r\n  },\r\n  plugins: [\r\n    new webpack.DefinePlugin({\r\n      __isBrowser__: 'true',\r\n    }),\r\n  ],\r\n  devtool: 'source-map',\r\n};\r\n\r\nconst serverConfig = {\r\n  mode: 'development',\r\n  entry: { server: ['./functions/src/ssr_server.js'] },\r\n  target: 'node',\r\n  externals: [nodeExternals()],\r\n  output: {\r\n    filename: 'server.js',\r\n    path: path.resolve(__dirname, 'functions/dist'),\r\n    publicPath: '/',\r\n  },\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.jsx?$/,\r\n        use: {\r\n          loader: 'babel-loader',\r\n          options: {\r\n            presets: [\r\n              [\r\n                '@babel/preset-env',\r\n                {\r\n                  targets: { node: '10' },\r\n                },\r\n              ],\r\n              '@babel/preset-react',\r\n            ],\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  plugins: [\r\n    new webpack.DefinePlugin({\r\n      __isBrowser__: 'false',\r\n    }),\r\n  ],\r\n  devtool: 'source-map',\r\n};\r\n\r\nmodule.exports = [browserConfig, serverConfig];\r\n","module.exports = require(\"dotenv\");;","module.exports = require(\"express\");;","module.exports = require(\"path\");;","module.exports = require(\"react\");;","module.exports = require(\"react-dom/server\");;","module.exports = require(\"source-map-support\");;","module.exports = require(\"webpack\");;","module.exports = require(\"webpack-dev-middleware\");;","module.exports = require(\"webpack-hot-middleware\");;","module.exports = require(\"webpack-node-externals\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./functions/src/ssr_server.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}